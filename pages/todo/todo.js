"use strict";
var startPoint;
Page({
    data: {
        loginStatus: false,
        taskCount: 0,
        buttonTop: 0,
        buttonLeft: 0,
        windowHeight: 0,
        windowWidth: 0
    },
    bindViewTap: function () {
        wx.navigateTo({
            url: '../logs/logs',
        });
    },
    onLoad: function () {
        this.getLoginStatus();
        var that = this;
        wx.getSystemInfo({
            success: function (res) {
                console.log(res);
                console.log('height=' + res.windowHeight);
                console.log('width=' + res.windowWidth);
                that.setData({
                    windowHeight: res.windowHeight,
                    windowWidth: res.windowWidth,
                    buttonTop: res.windowHeight * 0.8
                });
            }
        });
    },
    onShow: function () {
        this.getLoginStatus();
    },
    getLoginStatus: function () {
        wx.getStorage({
            key: 'loginStatus',
            success: this.onLoginStatusGetSuccess,
            fail: this.onLoginStatusGetFail,
        });
    },
    onLoginStatusGetSuccess: function (e) {
        console.log('获取登录状态成功回调', e);
        this.setData({
            loginStatus: e.data
        });
    },
    onLoginStatusGetFail: function (e) {
        console.log('获取登录状态失败回调', e);
        wx.setStorage({
            key: 'loginStatus',
            data: false,
        });
        this.setData({
            loginStatus: false
        });
    },
    loginStatusChanged: function (e) {
        console.log('登录状态变更触发的事件回调', e);
        this.getLoginStatus();
    },
    userTaskFetch: function (e) {
        var _a;
        console.log('拉取用户任务回调', e);
        this.setData({
            taskCount: (_a = e.detail.count) !== null && _a !== void 0 ? _a : 0
        });
    },
    onTapNavigateBtn: function (e) {
        console.log('点击跳转按钮事件为:', e);
        if (this.data.loginStatus == false) {
            console.log('登录状态为 false,直接忽略');
            wx.showLoading({
                title: '请先登录',
            });
            setTimeout(function () {
                wx.hideLoading();
            }, 2000);
            return;
        }
        wx.navigateTo({
            url: e.target.dataset.path,
        });
    },
    onNavigatorToTaskPool: function () {
        if (this.data.loginStatus == false) {
            console.log('登录状态为 false,直接忽略');
        }
        else {
            wx.navigateTo({
                url: '/pages/task_list/task_list',
            });
        }
    },
    onNavigatorToMyTask: function () {
        if (this.data.loginStatus == false) {
            console.log('登录状态为 false,直接忽略');
            return;
        }
        wx.navigateTo({
            url: '/pages/user_task_list/user_task_list',
        });
    },
    buttonStart: function (e) {
        startPoint = e.touches[0];
    },
    buttonMove: function (e) {
        var endPoint = e.touches[e.touches.length - 1];
        var translateX = endPoint.clientX - startPoint.clientX;
        var translateY = endPoint.clientY - startPoint.clientY;
        startPoint = endPoint;
        var buttonTop = this.data.buttonTop + translateY;
        var buttonLeft = this.data.buttonLeft + translateX;
        if (buttonLeft + 50 >= this.data.windowWidth) {
            buttonLeft = this.data.windowWidth - 50;
        }
        if (buttonLeft <= 0) {
            buttonLeft = 0;
        }
        if (buttonTop <= 0) {
            buttonTop = 0;
        }
        if (buttonTop + 50 >= this.data.windowHeight) {
            buttonTop = this.data.windowHeight - 50;
        }
        this.setData({
            buttonTop: buttonTop,
            buttonLeft: buttonLeft
        });
    },
    buttonEnd: function (e) {
        console.log("移动结束", e);
        var buttonLeft = this.data.buttonLeft;
        if (buttonLeft >= this.data.windowWidth / 2) {
            buttonLeft = this.data.windowWidth - 50;
        }
        if (buttonLeft < this.data.windowWidth / 2) {
            buttonLeft = 0;
        }
        this.setData({
            buttonLeft: buttonLeft
        });
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9kby5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRvZG8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUdBLElBQUksVUFBZSxDQUFBO0FBRW5CLElBQUksQ0FBQztJQUNELElBQUksRUFBRTtRQUNGLFdBQVcsRUFBRSxLQUFLO1FBQ2xCLFNBQVMsRUFBRSxDQUFDO1FBR1osU0FBUyxFQUFFLENBQUM7UUFDWixVQUFVLEVBQUUsQ0FBQztRQUNiLFlBQVksRUFBRSxDQUFDO1FBQ2YsV0FBVyxFQUFFLENBQUM7S0FDakI7SUFFRCxXQUFXO1FBQ1AsRUFBRSxDQUFDLFVBQVUsQ0FBQztZQUNWLEdBQUcsRUFBRSxjQUFjO1NBQ3RCLENBQUMsQ0FBQTtJQUNOLENBQUM7SUFDRCxNQUFNO1FBQ0YsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFBO1FBRXJCLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixFQUFFLENBQUMsYUFBYSxDQUFDO1lBQ2IsT0FBTyxFQUFFLFVBQVUsR0FBRztnQkFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFFakIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUMxQyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUM7Z0JBRXhDLElBQUksQ0FBQyxPQUFPLENBQUM7b0JBQ1QsWUFBWSxFQUFFLEdBQUcsQ0FBQyxZQUFZO29CQUM5QixXQUFXLEVBQUUsR0FBRyxDQUFDLFdBQVc7b0JBQzVCLFNBQVMsRUFBRSxHQUFHLENBQUMsWUFBWSxHQUFHLEdBQUc7aUJBQ3BDLENBQUMsQ0FBQTtZQUNOLENBQUM7U0FDSixDQUFDLENBQUE7SUFDTixDQUFDO0lBRUQsTUFBTTtRQUNGLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQTtJQUN6QixDQUFDO0lBRUQsY0FBYztRQUNWLEVBQUUsQ0FBQyxV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SUFBSSxVQUFVLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxFQUFFO1lBQ3pDLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7U0FDM0M7UUFDRCxJQUFJLFVBQVUsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLEVBQUU7WUFDeEMsVUFBVSxHQUFHLENBQUMsQ0FBQztTQUNsQjtRQUNELElBQUksQ0FBQyxPQUFPLENBQUM7WUFDVCxVQUFVLEVBQUUsVUFBVTtTQUN6QixDQUFDLENBQUE7SUFDTixDQUFDO0NBQ0osQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdG9kby50c1xuLy8g6I635Y+W5bqU55So5a6e5L6LXG5cbnZhciBzdGFydFBvaW50OiBhbnlcblxuUGFnZSh7XG4gICAgZGF0YToge1xuICAgICAgICBsb2dpblN0YXR1czogZmFsc2UsXG4gICAgICAgIHRhc2tDb3VudDogMCxcblxuICAgICAgICAvL+aLluWKqOaMiemSruebuOWFs1xuICAgICAgICBidXR0b25Ub3A6IDAsXG4gICAgICAgIGJ1dHRvbkxlZnQ6IDAsXG4gICAgICAgIHdpbmRvd0hlaWdodDogMCxcbiAgICAgICAgd2luZG93V2lkdGg6IDBcbiAgICB9LFxuICAgIC8vIOS6i+S7tuWkhOeQhuWHveaVsFxuICAgIGJpbmRWaWV3VGFwKCkge1xuICAgICAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgICAgICAgIHVybDogJy4uL2xvZ3MvbG9ncycsXG4gICAgICAgIH0pXG4gICAgfSxcbiAgICBvbkxvYWQoKSB7XG4gICAgICAgIHRoaXMuZ2V0TG9naW5TdGF0dXMoKVxuXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgd3guZ2V0U3lzdGVtSW5mbyh7XG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICAgICAgICAvLyDlsY/luZXlrr3luqbjgIHpq5jluqZcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGVpZ2h0PScgKyByZXMud2luZG93SGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnd2lkdGg9JyArIHJlcy53aW5kb3dXaWR0aCk7XG4gICAgICAgICAgICAgICAgLy8g6auY5bqmLOWuveW6piDljZXkvY3kuLpweFxuICAgICAgICAgICAgICAgIHRoYXQuc2V0RGF0YSh7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd0hlaWdodDogcmVzLndpbmRvd0hlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgd2luZG93V2lkdGg6IHJlcy53aW5kb3dXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uVG9wOiByZXMud2luZG93SGVpZ2h0ICogMC44XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9LFxuXG4gICAgb25TaG93KCkge1xuICAgICAgICB0aGlzLmdldExvZ2luU3RhdHVzKClcbiAgICB9LFxuXG4gICAgZ2V0TG9naW5TdGF0dXMoKSB7XG4gICAgICAgIHd4LmdldFN0b3JhZ2Uoe1xuICAgICAgICAgICAga2V5OiAnbG9naW5TdGF0dXMnLFxuICAgICAgICAgICAgc3VjY2VzczogdGhpcy5vbkxvZ2luU3RhdHVzR2V0U3VjY2VzcyxcbiAgICAgICAgICAgIGZhaWw6IHRoaXMub25Mb2dpblN0YXR1c0dldEZhaWwsXG4gICAgICAgIH0pXG4gICAgfSxcblxuICAgIG9uTG9naW5TdGF0dXNHZXRTdWNjZXNzKGU6IGFueSkge1xuICAgICAgICBjb25zb2xlLmxvZygn6I635Y+W55m75b2V54q25oCB5oiQ5Yqf5Zue6LCDJywgZSlcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICAgIGxvZ2luU3RhdHVzOiBlLmRhdGFcbiAgICAgICAgfSlcbiAgICB9LFxuXG4gICAgb25Mb2dpblN0YXR1c0dldEZhaWwoZTogYW55KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfojrflj5bnmbvlvZXnirbmgIHlpLHotKXlm57osIMnLCBlKVxuICAgICAgICB3eC5zZXRTdG9yYWdlKHtcbiAgICAgICAgICAgIGtleTogJ2xvZ2luU3RhdHVzJyxcbiAgICAgICAgICAgIGRhdGE6IGZhbHNlLFxuICAgICAgICB9KVxuICAgICAgICB0aGlzLnNldERhdGEoe1xuICAgICAgICAgICAgbG9naW5TdGF0dXM6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgfSxcblxuICAgIGxvZ2luU3RhdHVzQ2hhbmdlZChlOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ+eZu+W9leeKtuaAgeWPmOabtOinpuWPkeeahOS6i+S7tuWbnuiwgycsIGUpXG4gICAgICAgIHRoaXMuZ2V0TG9naW5TdGF0dXMoKVxuICAgIH0sXG5cbiAgICB1c2VyVGFza0ZldGNoKGU6IGFueSkge1xuICAgICAgICBjb25zb2xlLmxvZygn5ouJ5Y+W55So5oi35Lu75Yqh5Zue6LCDJywgZSlcbiAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICAgIHRhc2tDb3VudDogZS5kZXRhaWwuY291bnQgPz8gMFxuICAgICAgICB9KVxuICAgIH0sXG5cbiAgICBvblRhcE5hdmlnYXRlQnRuKGU6IGFueSkge1xuICAgICAgICBjb25zb2xlLmxvZygn54K55Ye76Lez6L2s5oyJ6ZKu5LqL5Lu25Li6OicsIGUpXG4gICAgICAgIGlmICh0aGlzLmRhdGEubG9naW5TdGF0dXMgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfnmbvlvZXnirbmgIHkuLogZmFsc2Us55u05o6l5b+955WlJylcbiAgICAgICAgICAgIHd4LnNob3dMb2FkaW5nKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogJ+ivt+WFiOeZu+W9lScsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgd3guaGlkZUxvYWRpbmcoKVxuICAgICAgICAgICAgfSwgMjAwMClcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgICAgICAgdXJsOiBlLnRhcmdldC5kYXRhc2V0LnBhdGgsXG4gICAgICAgIH0pXG4gICAgfSxcblxuICAgIG9uTmF2aWdhdG9yVG9UYXNrUG9vbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5sb2dpblN0YXR1cyA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ+eZu+W9leeKtuaAgeS4uiBmYWxzZSznm7TmjqXlv73nlaUnKVxuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvcGFnZXMvdGFza19saXN0L3Rhc2tfbGlzdCcsXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIG9uTmF2aWdhdG9yVG9NeVRhc2soKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEubG9naW5TdGF0dXMgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfnmbvlvZXnirbmgIHkuLogZmFsc2Us55u05o6l5b+955WlJylcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgICAgICAgdXJsOiAnL3BhZ2VzL3VzZXJfdGFza19saXN0L3VzZXJfdGFza19saXN0JyxcbiAgICAgICAgfSlcbiAgICB9LFxuXG4gICAgYnV0dG9uU3RhcnQ6IGZ1bmN0aW9uIChlOiBhbnkpIHtcbiAgICAgICAgc3RhcnRQb2ludCA9IGUudG91Y2hlc1swXVxuICAgIH0sXG4gICAgYnV0dG9uTW92ZTogZnVuY3Rpb24gKGU6IGFueSkge1xuICAgICAgICB2YXIgZW5kUG9pbnQgPSBlLnRvdWNoZXNbZS50b3VjaGVzLmxlbmd0aCAtIDFdXG4gICAgICAgIHZhciB0cmFuc2xhdGVYID0gZW5kUG9pbnQuY2xpZW50WCAtIHN0YXJ0UG9pbnQuY2xpZW50WFxuICAgICAgICB2YXIgdHJhbnNsYXRlWSA9IGVuZFBvaW50LmNsaWVudFkgLSBzdGFydFBvaW50LmNsaWVudFlcbiAgICAgICAgc3RhcnRQb2ludCA9IGVuZFBvaW50XG4gICAgICAgIHZhciBidXR0b25Ub3AgPSB0aGlzLmRhdGEuYnV0dG9uVG9wICsgdHJhbnNsYXRlWVxuICAgICAgICB2YXIgYnV0dG9uTGVmdCA9IHRoaXMuZGF0YS5idXR0b25MZWZ0ICsgdHJhbnNsYXRlWFxuICAgICAgICAvL+WIpOaWreaYr+enu+WKqOWQpui2heWHuuWxj+W5lVxuICAgICAgICBpZiAoYnV0dG9uTGVmdCArIDUwID49IHRoaXMuZGF0YS53aW5kb3dXaWR0aCkge1xuICAgICAgICAgICAgYnV0dG9uTGVmdCA9IHRoaXMuZGF0YS53aW5kb3dXaWR0aCAtIDUwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChidXR0b25MZWZ0IDw9IDApIHtcbiAgICAgICAgICAgIGJ1dHRvbkxlZnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChidXR0b25Ub3AgPD0gMCkge1xuICAgICAgICAgICAgYnV0dG9uVG9wID0gMFxuICAgICAgICB9XG4gICAgICAgIGlmIChidXR0b25Ub3AgKyA1MCA+PSB0aGlzLmRhdGEud2luZG93SGVpZ2h0KSB7XG4gICAgICAgICAgICBidXR0b25Ub3AgPSB0aGlzLmRhdGEud2luZG93SGVpZ2h0IC0gNTA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICAgIGJ1dHRvblRvcDogYnV0dG9uVG9wLFxuICAgICAgICAgICAgYnV0dG9uTGVmdDogYnV0dG9uTGVmdFxuICAgICAgICB9KVxuICAgIH0sXG4gICAgYnV0dG9uRW5kOiBmdW5jdGlvbiAoZTogYW55KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi56e75Yqo57uT5p2fXCIsIGUpXG4gICAgICAgIHZhciBidXR0b25MZWZ0ID0gdGhpcy5kYXRhLmJ1dHRvbkxlZnRcbiAgICAgICAgaWYgKGJ1dHRvbkxlZnQgPj0gdGhpcy5kYXRhLndpbmRvd1dpZHRoIC8gMikge1xuICAgICAgICAgICAgYnV0dG9uTGVmdCA9IHRoaXMuZGF0YS53aW5kb3dXaWR0aCAtIDUwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChidXR0b25MZWZ0IDwgdGhpcy5kYXRhLndpbmRvd1dpZHRoIC8gMikge1xuICAgICAgICAgICAgYnV0dG9uTGVmdCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXREYXRhKHtcbiAgICAgICAgICAgIGJ1dHRvbkxlZnQ6IGJ1dHRvbkxlZnRcbiAgICAgICAgfSlcbiAgICB9LFxufSlcbiJdfQ==